# 观察者模式（发布-订阅模式）
***
## 设计思想
观察者模式定义了一种一对多的依赖关系，让多个观察者对象同时监听某一个主题对象。  
当主题对象发生变化时，它的所有依赖者（观察者）都会收到通知并更新。

## 适用场景
1. 当一个对象的改变需要同时改变其他对象时，而且它不知道具体有多少对象有待改变时，应该考虑使用观察者模式。
2. 当一个抽象模型有两个方面，其中一个方面依赖于另一个方面时，可将这二者封装在独立的对象中以使它们可以各自独立地改变和复用。

***
## 优点
1. 观察者模式可以实现表示层和数据逻辑层的分离，并定义了稳定的消息更新传递机制，抽象了更新接口，使得可以有各种各样不同的表示层作为具体观察者角色。
2. 观察者模式在观察目标和观察者之间建立一个抽象的耦合。 
3. 观察者模式符合“开闭原则”和“单一职责原则”的要求。 
4. 观察者模式可以在运行时建立对象之间的联系。

## 缺点
1. 如果一个观察目标对象有很多直接和间接观察者，将所有的观察者都通知到会花费很多时间。
2. 如果在观察者和观察目标之间有循环依赖，可能会导致系统崩溃。
3. 观察者模式没有相应的机制让观察者知道所观察的目标对象是怎么发生变化的，而仅仅只是知道观察目标发生了变化。

***
## 角色介绍
1. 抽象主题（Subject）角色：抽象主题角色把所有观察者对象的引用保存在一个集合中，每个主题都可以有任何数量的观察者。抽象主题提供一个接口，可以增加和删除观察者对象。
2. 具体主题（ConcreteSubject）角色：将有关状态存入具体观察者对象；在具体主题的内部状态改变时，给所有登记过的观察者发出通知。
3. 抽象观察者（Observer）角色：为所有的具体观察者定义一个接口，在得到主题的通知时更新自己。
4. 具体观察者（ConcreteObserver）角色：实现抽象观察者角色所要求的更新接口，以便使本身的状态与主题的状态相协调。

## 举例说明
1. 一个学生（具体观察者）可以订阅（注册）多个课程（具体主题），当课程更新时，学生会收到通知。
2. 超市促销时，会有很多人（具体观察者）关注（注册）促销信息（具体主题），当有促销信息时，会通知所有关注促销信息的人。